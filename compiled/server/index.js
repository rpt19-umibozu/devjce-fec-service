'use strict';

var express = require('express');
var path = require('path');

var _require = require('../database/index'),
    Reviews = _require.Reviews;

var app = express();

app.use(express.static('public'));
app.use(express.text());
app.use(express.urlencoded());

app.get('/averageScore:id', function (req, res) {
  console.log(req);
  var listId = req.params.id;
  Reviews.find({ id: listId }, function (err, result) {
    if (err) {
      console.log('error in averageScore', err);
      res.sendStatus(404);
    } else {
      if (result.length === 0) {
        return 0;
      }
      var finalScore = 0;
      var helperScore = 0;
      var reviews = result[0].reviews;
      var reviewNumber = reviews.length;
      // console.log('value of reviews', reviews.length);
      for (var i = 0; i < reviews.length; i++) {
        var scores = reviews[i].scores[0];
        // console.log(scores);

        helperScore += +scores.cleanliness;
        helperScore += +scores.communication;
        helperScore += +scores.checkin;
        helperScore += +scores.accuracy;
        helperScore += +scores.location;
        helperScore += +scores.value;

        finalScore += helperScore / 6;
        helperScore = 0;
      }
      res.end((finalScore / reviews.length).toFixed(2).toString() + ', (' + reviewNumber + ' reviews)');
    }
  });
});

app.get('/listing', function (req, res) {
  console.log('listing', req.query.data);
  var listId = req.query.data || 10001;
  var reg = /\d{5}/;
  var result = reg.test(listId);
  if (!result) {

    var data = ["Super_Cute_Retro_Airstream", "Redundant_Driver_Strategic_house", "Multibyte_Program_Opensource_house", "Neural_Transmitter_Magnetic_house", "Haptic_Bandwidth_Leadingedge_house", "Primary_Harddrive_Killer_house", "Solidstate_Harddrive_Crossplatform_house", "Optical_Bandwidth_Robust_house", "Solidstate_Interface_Crossmedia_house", "Bluetooth_Port_Opensource_house", "Neural_Program_Bricksandclicks_house", "Online_Matrix_Usercentric_house", "Virtual_Transmitter_Interactive_house", "Virtual_System_Cuttingedge_house", "Bluetooth_Application_Robust_house", "Primary_Harddrive_B2C_house", "Haptic_Port_Transparent_house", "Haptic_Bus_Sexy_house", "Auxiliary_Feed_Cuttingedge_house", "Optical_Firewall_Clicksandmortar_house", "Auxiliary_Feed_Impactful_house", "Neural_Circuit_Outofthebox_house", "Bluetooth_Port_Compelling_house", "Bluetooth_Transmitter_Granular_house", "Optical_Bandwidth_Efficient_house", "Haptic_Port_Onetoone_house", "Online_Program_Intuitive_house", "Haptic_Protocol_Frontend_house", "Solidstate_Port_Valueadded_house", "Multibyte_Bandwidth_Proactive_house", "Opensource_Driver_Granular_house", "Wireless_Panel_Realtime_house", "Mobile_Port_Innovative_house", "Neural_Alarm_Bricksandclicks_house", "Digital_Feed_Revolutionary_house", "Auxiliary_System_Innovative_house", "1080p_Circuit_Scalable_house", "Auxiliary_Alarm_Onetoone_house", "Haptic_System_Worldclass_house", "1080p_Microchip_Ubiquitous_house", "Multibyte_System_Interactive_house", "Haptic_Firewall_Ebusiness_house", "Virtual_Feed_Proactive_house", "1080p_Bus_Viral_house", "Wireless_Matrix_Frictionless_house", "Bluetooth_Application_Revolutionary_house", "1080p_Application_Bricksandclicks_house", "Backend_Bus_24/365_house", "Mobile_Alarm_Granular_house", "Backend_Alarm_Bestofbreed_house", "Wireless_Panel_Clicksandmortar_house", "Crossplatform_Harddrive_Wireless_house", "Solidstate_Alarm_Robust_house", "Neural_Application_Intuitive_house", "Multibyte_Interface_Interactive_house", "Backend_System_Rich_house", "Backend_Feed_Usercentric_house", "Bluetooth_System_Realtime_house", "Multibyte_Alarm_24/7_house", "Mobile_Alarm_Dotcom_house", "Multibyte_Sensor_Opensource_house", "Auxiliary_Sensor_Endtoend_house", "Solidstate_Card_Cuttingedge_house", "Wireless_Interface_Interactive_house", "Auxiliary_Panel_Vertical_house", "Multibyte_Program_Wireless_house", "Crossplatform_Microchip_Synergistic_house", "Bluetooth_Matrix_Magnetic_house", "Mobile_Sensor_Missioncritical_house", "Virtual_Port_Bleedingedge_house", "Auxiliary_Bus_Bestofbreed_house", "Haptic_Alarm_B2B_house", "1080p_Array_Plugandplay_house", "Optical_Microchip_Revolutionary_house", "Digital_Card_B2C_house", "Bluetooth_Microchip_Webenabled_house", "1080p_Matrix_Impactful_house", "Neural_Feed_Enterprise_house", "Crossplatform_Matrix_Visionary_house", "Optical_Card_Proactive_house", "Redundant_Alarm_Plugandplay_house", "Redundant_Alarm_Seamless_house", "Wireless_Application_Endtoend_house", "Virtual_Panel_Scalable_house", "1080p_System_Visionary_house", "Solidstate_Bandwidth_Nextgeneration_house", "Crossplatform_System_Endtoend_house", "Wireless_Driver_Rich_house", "Backend_Matrix_Robust_house", "Opensource_Bandwidth_B2B_house", "Mobile_Pixel_Proactive_house", "Backend_Harddrive_Frictionless_house", "Auxiliary_Array_Ubiquitous_house", "Mobile_Pixel_Frictionless_house", "Online_Transmitter_Dotcom_house", "Bluetooth_Sensor_Revolutionary_house", "Crossplatform_Protocol_Granular_house", "Primary_Matrix_Realtime_house", "Crossplatform_Port_Wireless_house", "Online_Bus_Integrated_house"];

    if (data.indexOf(listId) !== -1) {
      listId = data.indexOf(listId) + 10001;
    }
  }
  Reviews.find({ id: listId }, function (err, result) {
    if (err) {
      console.log('error in Reviews.find', err);
      res.sendStatus(404);
    } else {
      res.send(result);
    }
  });
});

app.get('/:id', function (req, res) {
  console.log('send file');
  res.sendFile(path.join(__dirname, '../public', '/index.html'));
});

app.listen(3004, function () {
  console.log('Express server for REVIEWS listening on port 3004');
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NlcnZlci9pbmRleC5qcyJdLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInBhdGgiLCJSZXZpZXdzIiwiYXBwIiwidXNlIiwic3RhdGljIiwidGV4dCIsInVybGVuY29kZWQiLCJnZXQiLCJyZXEiLCJyZXMiLCJjb25zb2xlIiwibG9nIiwibGlzdElkIiwicGFyYW1zIiwiaWQiLCJmaW5kIiwiZXJyIiwicmVzdWx0Iiwic2VuZFN0YXR1cyIsImxlbmd0aCIsImZpbmFsU2NvcmUiLCJoZWxwZXJTY29yZSIsInJldmlld3MiLCJyZXZpZXdOdW1iZXIiLCJpIiwic2NvcmVzIiwiY2xlYW5saW5lc3MiLCJjb21tdW5pY2F0aW9uIiwiY2hlY2tpbiIsImFjY3VyYWN5IiwibG9jYXRpb24iLCJ2YWx1ZSIsImVuZCIsInRvRml4ZWQiLCJ0b1N0cmluZyIsInF1ZXJ5IiwiZGF0YSIsInJlZyIsInRlc3QiLCJpbmRleE9mIiwic2VuZCIsInNlbmRGaWxlIiwiam9pbiIsIl9fZGlybmFtZSIsImxpc3RlbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNQSxVQUFVQyxRQUFRLFNBQVIsQ0FBaEI7QUFDQSxJQUFNQyxPQUFPRCxRQUFRLE1BQVIsQ0FBYjs7ZUFDb0JBLFFBQVEsbUJBQVIsQztJQUFaRSxPLFlBQUFBLE87O0FBRVIsSUFBSUMsTUFBTUosU0FBVjs7QUFFQUksSUFBSUMsR0FBSixDQUFRTCxRQUFRTSxNQUFSLENBQWUsUUFBZixDQUFSO0FBQ0FGLElBQUlDLEdBQUosQ0FBUUwsUUFBUU8sSUFBUixFQUFSO0FBQ0FILElBQUlDLEdBQUosQ0FBUUwsUUFBUVEsVUFBUixFQUFSOztBQUVBSixJQUFJSyxHQUFKLENBQVEsa0JBQVIsRUFBNEIsVUFBQ0MsR0FBRCxFQUFNQyxHQUFOLEVBQWM7QUFDeENDLFVBQVFDLEdBQVIsQ0FBWUgsR0FBWjtBQUNBLE1BQUlJLFNBQVNKLElBQUlLLE1BQUosQ0FBV0MsRUFBeEI7QUFDQWIsVUFBUWMsSUFBUixD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aEM7QUFDRDtBQUNGO0FBQ0NYLFVBQVFjLElBQVIsQ0FBYSxFQUFDRCxJQUFJRixNQUFMLEVBQWIsRUFBMkIsVUFBQ0ksR0FBRCxFQUFNQyxNQUFOLEVBQWlCO0FBQzFDLFFBQUlELEdBQUosRUFBUztBQUNQTixjQUFRQyxHQUFSLENBQVksdUJBQVosRUFBcUNLLEdBQXJDO0FBQ0FQLFVBQUlTLFVBQUosQ0FBZSxHQUFmO0FBQ0QsS0FIRCxNQUdPO0FBQ0xULFVBQUkrQixJQUFKLENBQVN2QixNQUFUO0FBQ0Q7QUFDRixHQVBEO0FBUUgsQ0FyQkQ7O0FBdUJBZixJQUFJSyxHQUFKLENBQVEsTUFBUixFQUFnQixVQUFDQyxHQUFELEVBQU1DLEdBQU4sRUFBYztBQUM1QkMsVUFBUUMsR0FBUixDQUFZLFdBQVo7QUFDQUYsTUFBSWdDLFFBQUosQ0FBYXpDLEtBQUswQyxJQUFMLENBQVVDLFNBQVYsRUFBcUIsV0FBckIsRUFBa0MsYUFBbEMsQ0FBYjtBQUNELENBSEQ7O0FBS0F6QyxJQUFJMEMsTUFBSixDQUFXLElBQVgsRUFBaUIsWUFBTTtBQUNyQmxDLFVBQVFDLEdBQVIsQ0FBWSxtREFBWjtBQUNELENBRkQiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbmNvbnN0IHsgUmV2aWV3cyB9ID0gcmVxdWlyZSgnLi4vZGF0YWJhc2UvaW5kZXgnKTtcblxubGV0IGFwcCA9IGV4cHJlc3MoKTtcblxuYXBwLnVzZShleHByZXNzLnN0YXRpYygncHVibGljJykpO1xuYXBwLnVzZShleHByZXNzLnRleHQoKSk7XG5hcHAudXNlKGV4cHJlc3MudXJsZW5jb2RlZCgpKTtcblxuYXBwLmdldCgnL2F2ZXJhZ2VTY29yZTppZCcsIChyZXEsIHJlcykgPT4ge1xuICBjb25zb2xlLmxvZyhyZXEpO1xuICBsZXQgbGlzdElkID0gcmVxLnBhcmFtcy5pZDtcbiAgUmV2aWV3cy5maW5kKHtpZDogbGlzdElkfSwgKGVyciwgcmVzdWx0KSA9PiB7XG4gICAgaWYgKGVycikge1xuICAgICAgY29uc29sZS5sb2coJ2Vycm9yIGluIGF2ZXJhZ2VTY29yZScsIGVycik7XG4gICAgICByZXMuc2VuZFN0YXR1cyg0MDQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocmVzdWx0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cbiAgICAgIGxldCBmaW5hbFNjb3JlID0gMDtcbiAgICAgIGxldCBoZWxwZXJTY29yZSA9IDA7XG4gICAgICBsZXQgcmV2aWV3cyA9IHJlc3VsdFswXS5yZXZpZXdzO1xuICAgICAgbGV0IHJldmlld051bWJlciA9IHJldmlld3MubGVuZ3RoO1xuICAgICAgLy8gY29uc29sZS5sb2coJ3ZhbHVlIG9mIHJldmlld3MnLCByZXZpZXdzLmxlbmd0aCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJldmlld3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IHNjb3JlcyA9IHJldmlld3NbaV0uc2NvcmVzWzBdO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhzY29yZXMpO1xuXG4gICAgICAgIGhlbHBlclNjb3JlICs9ICtzY29yZXMuY2xlYW5saW5lc3M7XG4gICAgICAgIGhlbHBlclNjb3JlICs9ICtzY29yZXMuY29tbXVuaWNhdGlvbjtcbiAgICAgICAgaGVscGVyU2NvcmUgKz0gK3Njb3Jlcy5jaGVja2luO1xuICAgICAgICBoZWxwZXJTY29yZSArPSArc2NvcmVzLmFjY3VyYWN5O1xuICAgICAgICBoZWxwZXJTY29yZSArPSArc2NvcmVzLmxvY2F0aW9uO1xuICAgICAgICBoZWxwZXJTY29yZSArPSArc2NvcmVzLnZhbHVlO1xuXG4gICAgICAgIGZpbmFsU2NvcmUgKz0gKGhlbHBlclNjb3JlIC8gNik7XG4gICAgICAgIGhlbHBlclNjb3JlID0gMDtcbiAgICAgIH1cbiAgICAgIHJlcy5lbmQoYCR7KGZpbmFsU2NvcmUgLyByZXZpZXdzLmxlbmd0aCkudG9GaXhlZCgyKS50b1N0cmluZygpfSwgKCR7cmV2aWV3TnVtYmVyfSByZXZpZXdzKWApO1xuICAgIH1cbiAgfSlcbn0pXG5cbmFwcC5nZXQoJy9saXN0aW5nJywgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdsaXN0aW5nJywgcmVxLnF1ZXJ5LmRhdGEpO1xuICBsZXQgbGlzdElkID0gcmVxLnF1ZXJ5LmRhdGEgfHwgMTAwMDE7XG4gIGxldCByZWcgPSAvXFxkezV9LztcbiAgbGV0IHJlc3VsdCA9IHJlZy50ZXN0KGxpc3RJZCk7XG4gIGlmICghcmVzdWx0KSB7XG5cbiAgICBsZXQgZGF0YSA9IFtcIlN1cGVyX0N1dGVfUmV0cm9fQWlyc3RyZWFtXCIsIFwiUmVkdW5kYW50X0RyaXZlcl9TdHJhdGVnaWNfaG91c2VcIiwgXCJNdWx0aWJ5dGVfUHJvZ3JhbV9PcGVuc291cmNlX2hvdXNlXCIsIFwiTmV1cmFsX1RyYW5zbWl0dGVyX01hZ25ldGljX2hvdXNlXCIsIFwiSGFwdGljX0JhbmR3aWR0aF9MZWFkaW5nZWRnZV9ob3VzZVwiLCBcIlByaW1hcnlfSGFyZGRyaXZlX0tpbGxlcl9ob3VzZVwiLCBcIlNvbGlkc3RhdGVfSGFyZGRyaXZlX0Nyb3NzcGxhdGZvcm1faG91c2VcIiwgXCJPcHRpY2FsX0JhbmR3aWR0aF9Sb2J1c3RfaG91c2VcIiwgXCJTb2xpZHN0YXRlX0ludGVyZmFjZV9Dcm9zc21lZGlhX2hvdXNlXCIsIFwiQmx1ZXRvb3RoX1BvcnRfT3BlbnNvdXJjZV9ob3VzZVwiLCBcIk5ldXJhbF9Qcm9ncmFtX0JyaWNrc2FuZGNsaWNrc19ob3VzZVwiLCBcIk9ubGluZV9NYXRyaXhfVXNlcmNlbnRyaWNfaG91c2VcIiwgXCJWaXJ0dWFsX1RyYW5zbWl0dGVyX0ludGVyYWN0aXZlX2hvdXNlXCIsIFwiVmlydHVhbF9TeXN0ZW1fQ3V0dGluZ2VkZ2VfaG91c2VcIiwgXCJCbHVldG9vdGhfQXBwbGljYXRpb25fUm9idXN0X2hvdXNlXCIsIFwiUHJpbWFyeV9IYXJkZHJpdmVfQjJDX2hvdXNlXCIsIFwiSGFwdGljX1BvcnRfVHJhbnNwYXJlbnRfaG91c2VcIiwgXCJIYXB0aWNfQnVzX1NleHlfaG91c2VcIiwgXCJBdXhpbGlhcnlfRmVlZF9DdXR0aW5nZWRnZV9ob3VzZVwiLCBcIk9wdGljYWxfRmlyZXdhbGxfQ2xpY2tzYW5kbW9ydGFyX2hvdXNlXCIsIFwiQXV4aWxpYXJ5X0ZlZWRfSW1wYWN0ZnVsX2hvdXNlXCIsIFwiTmV1cmFsX0NpcmN1aXRfT3V0b2Z0aGVib3hfaG91c2VcIiwgXCJCbHVldG9vdGhfUG9ydF9Db21wZWxsaW5nX2hvdXNlXCIsIFwiQmx1ZXRvb3RoX1RyYW5zbWl0dGVyX0dyYW51bGFyX2hvdXNlXCIsIFwiT3B0aWNhbF9CYW5kd2lkdGhfRWZmaWNpZW50X2hvdXNlXCIsIFwiSGFwdGljX1BvcnRfT25ldG9vbmVfaG91c2VcIiwgXCJPbmxpbmVfUHJvZ3JhbV9JbnR1aXRpdmVfaG91c2VcIiwgXCJIYXB0aWNfUHJvdG9jb2xfRnJvbnRlbmRfaG91c2VcIiwgXCJTb2xpZHN0YXRlX1BvcnRfVmFsdWVhZGRlZF9ob3VzZVwiLCBcIk11bHRpYnl0ZV9CYW5kd2lkdGhfUHJvYWN0aXZlX2hvdXNlXCIsIFwiT3BlbnNvdXJjZV9Ecml2ZXJfR3JhbnVsYXJfaG91c2VcIiwgXCJXaXJlbGVzc19QYW5lbF9SZWFsdGltZV9ob3VzZVwiLCBcIk1vYmlsZV9Qb3J0X0lubm92YXRpdmVfaG91c2VcIiwgXCJOZXVyYWxfQWxhcm1fQnJpY2tzYW5kY2xpY2tzX2hvdXNlXCIsIFwiRGlnaXRhbF9GZWVkX1Jldm9sdXRpb25hcnlfaG91c2VcIiwgXCJBdXhpbGlhcnlfU3lzdGVtX0lubm92YXRpdmVfaG91c2VcIiwgXCIxMDgwcF9DaXJjdWl0X1NjYWxhYmxlX2hvdXNlXCIsIFwiQXV4aWxpYXJ5X0FsYXJtX09uZXRvb25lX2hvdXNlXCIsIFwiSGFwdGljX1N5c3RlbV9Xb3JsZGNsYXNzX2hvdXNlXCIsIFwiMTA4MHBfTWljcm9jaGlwX1ViaXF1aXRvdXNfaG91c2VcIiwgXCJNdWx0aWJ5dGVfU3lzdGVtX0ludGVyYWN0aXZlX2hvdXNlXCIsIFwiSGFwdGljX0ZpcmV3YWxsX0VidXNpbmVzc19ob3VzZVwiLCBcIlZpcnR1YWxfRmVlZF9Qcm9hY3RpdmVfaG91c2VcIiwgXCIxMDgwcF9CdXNfVmlyYWxfaG91c2VcIiwgXCJXaXJlbGVzc19NYXRyaXhfRnJpY3Rpb25sZXNzX2hvdXNlXCIsIFwiQmx1ZXRvb3RoX0FwcGxpY2F0aW9uX1Jldm9sdXRpb25hcnlfaG91c2VcIiwgXCIxMDgwcF9BcHBsaWNhdGlvbl9Ccmlja3NhbmRjbGlja3NfaG91c2VcIiwgXCJCYWNrZW5kX0J1c18yNC8zNjVfaG91c2VcIiwgXCJNb2JpbGVfQWxhcm1fR3JhbnVsYXJfaG91c2VcIiwgXCJCYWNrZW5kX0FsYXJtX0Jlc3RvZmJyZWVkX2hvdXNlXCIsIFwiV2lyZWxlc3NfUGFuZWxfQ2xpY2tzYW5kbW9ydGFyX2hvdXNlXCIsIFwiQ3Jvc3NwbGF0Zm9ybV9IYXJkZHJpdmVfV2lyZWxlc3NfaG91c2VcIiwgXCJTb2xpZHN0YXRlX0FsYXJtX1JvYnVzdF9ob3VzZVwiLCBcIk5ldXJhbF9BcHBsaWNhdGlvbl9JbnR1aXRpdmVfaG91c2VcIiwgXCJNdWx0aWJ5dGVfSW50ZXJmYWNlX0ludGVyYWN0aXZlX2hvdXNlXCIsIFwiQmFja2VuZF9TeXN0ZW1fUmljaF9ob3VzZVwiLCBcIkJhY2tlbmRfRmVlZF9Vc2VyY2VudHJpY19ob3VzZVwiLCBcIkJsdWV0b290aF9TeXN0ZW1fUmVhbHRpbWVfaG91c2VcIiwgXCJNdWx0aWJ5dGVfQWxhcm1fMjQvN19ob3VzZVwiLCBcIk1vYmlsZV9BbGFybV9Eb3Rjb21faG91c2VcIiwgXCJNdWx0aWJ5dGVfU2Vuc29yX09wZW5zb3VyY2VfaG91c2VcIiwgXCJBdXhpbGlhcnlfU2Vuc29yX0VuZHRvZW5kX2hvdXNlXCIsIFwiU29saWRzdGF0ZV9DYXJkX0N1dHRpbmdlZGdlX2hvdXNlXCIsIFwiV2lyZWxlc3NfSW50ZXJmYWNlX0ludGVyYWN0aXZlX2hvdXNlXCIsIFwiQXV4aWxpYXJ5X1BhbmVsX1ZlcnRpY2FsX2hvdXNlXCIsIFwiTXVsdGlieXRlX1Byb2dyYW1fV2lyZWxlc3NfaG91c2VcIiwgXCJDcm9zc3BsYXRmb3JtX01pY3JvY2hpcF9TeW5lcmdpc3RpY19ob3VzZVwiLCBcIkJsdWV0b290aF9NYXRyaXhfTWFnbmV0aWNfaG91c2VcIiwgXCJNb2JpbGVfU2Vuc29yX01pc3Npb25jcml0aWNhbF9ob3VzZVwiLCBcIlZpcnR1YWxfUG9ydF9CbGVlZGluZ2VkZ2VfaG91c2VcIiwgXCJBdXhpbGlhcnlfQnVzX0Jlc3RvZmJyZWVkX2hvdXNlXCIsIFwiSGFwdGljX0FsYXJtX0IyQl9ob3VzZVwiLCBcIjEwODBwX0FycmF5X1BsdWdhbmRwbGF5X2hvdXNlXCIsIFwiT3B0aWNhbF9NaWNyb2NoaXBfUmV2b2x1dGlvbmFyeV9ob3VzZVwiLCBcIkRpZ2l0YWxfQ2FyZF9CMkNfaG91c2VcIiwgXCJCbHVldG9vdGhfTWljcm9jaGlwX1dlYmVuYWJsZWRfaG91c2VcIiwgXCIxMDgwcF9NYXRyaXhfSW1wYWN0ZnVsX2hvdXNlXCIsIFwiTmV1cmFsX0ZlZWRfRW50ZXJwcmlzZV9ob3VzZVwiLCBcIkNyb3NzcGxhdGZvcm1fTWF0cml4X1Zpc2lvbmFyeV9ob3VzZVwiLCBcIk9wdGljYWxfQ2FyZF9Qcm9hY3RpdmVfaG91c2VcIiwgXCJSZWR1bmRhbnRfQWxhcm1fUGx1Z2FuZHBsYXlfaG91c2VcIiwgXCJSZWR1bmRhbnRfQWxhcm1fU2VhbWxlc3NfaG91c2VcIiwgXCJXaXJlbGVzc19BcHBsaWNhdGlvbl9FbmR0b2VuZF9ob3VzZVwiLCBcIlZpcnR1YWxfUGFuZWxfU2NhbGFibGVfaG91c2VcIiwgXCIxMDgwcF9TeXN0ZW1fVmlzaW9uYXJ5X2hvdXNlXCIsIFwiU29saWRzdGF0ZV9CYW5kd2lkdGhfTmV4dGdlbmVyYXRpb25faG91c2VcIiwgXCJDcm9zc3BsYXRmb3JtX1N5c3RlbV9FbmR0b2VuZF9ob3VzZVwiLCBcIldpcmVsZXNzX0RyaXZlcl9SaWNoX2hvdXNlXCIsIFwiQmFja2VuZF9NYXRyaXhfUm9idXN0X2hvdXNlXCIsIFwiT3BlbnNvdXJjZV9CYW5kd2lkdGhfQjJCX2hvdXNlXCIsIFwiTW9iaWxlX1BpeGVsX1Byb2FjdGl2ZV9ob3VzZVwiLCBcIkJhY2tlbmRfSGFyZGRyaXZlX0ZyaWN0aW9ubGVzc19ob3VzZVwiLCBcIkF1eGlsaWFyeV9BcnJheV9VYmlxdWl0b3VzX2hvdXNlXCIsIFwiTW9iaWxlX1BpeGVsX0ZyaWN0aW9ubGVzc19ob3VzZVwiLCBcIk9ubGluZV9UcmFuc21pdHRlcl9Eb3Rjb21faG91c2VcIiwgXCJCbHVldG9vdGhfU2Vuc29yX1Jldm9sdXRpb25hcnlfaG91c2VcIiwgXCJDcm9zc3BsYXRmb3JtX1Byb3RvY29sX0dyYW51bGFyX2hvdXNlXCIsIFwiUHJpbWFyeV9NYXRyaXhfUmVhbHRpbWVfaG91c2VcIiwgXCJDcm9zc3BsYXRmb3JtX1BvcnRfV2lyZWxlc3NfaG91c2VcIiwgXCJPbmxpbmVfQnVzX0ludGVncmF0ZWRfaG91c2VcIl07XG5cbiAgICBpZiAoZGF0YS5pbmRleE9mKGxpc3RJZCkgIT09IC0xKSB7XG4gICAgICBsaXN0SWQgPSBkYXRhLmluZGV4T2YobGlzdElkKSArIDEwMDAxO1xuICAgIH1cbiAgfVxuICAgIFJldmlld3MuZmluZCh7aWQ6IGxpc3RJZH0sIChlcnIsIHJlc3VsdCkgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZygnZXJyb3IgaW4gUmV2aWV3cy5maW5kJywgZXJyKTtcbiAgICAgICAgcmVzLnNlbmRTdGF0dXMoNDA0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlcy5zZW5kKHJlc3VsdCk7XG4gICAgICB9XG4gICAgfSlcbn0pO1xuXG5hcHAuZ2V0KCcvOmlkJywgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdzZW5kIGZpbGUnKTtcbiAgcmVzLnNlbmRGaWxlKHBhdGguam9pbihfX2Rpcm5hbWUsICcuLi9wdWJsaWMnLCAnL2luZGV4Lmh0bWwnKSk7XG59KTtcblxuYXBwLmxpc3RlbigzMDA0LCAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdFeHByZXNzIHNlcnZlciBmb3IgUkVWSUVXUyBsaXN0ZW5pbmcgb24gcG9ydCAzMDA0Jyk7XG59KTsiXX0=